
<div class="mat-elevation-z8">
  <!-- <div fxLayout="column" class="dialogspacing"> -->
  <div >
    <mat-form-field appearance="outline" style="width: 95%; padding:20px">
      <input (keyup)="applyFilter(filterValues)" [(ngModel)]=  "filterValues" matInput #input
      autocomplete="off" placeholder="SEARCH FOR PASSMARK" >
      <button matSuffix mat-button mat-icon-button>

      <mat-icon *ngIf =  "filterValues" (click)="filterValues=''; applyFilter(filterValues) ">close</mat-icon>
      <mat-icon *ngIf = "!filterValues" >search</mat-icon>
    </button>

    <mat-hint >Filter for passmark </mat-hint>


      <!-- <mat-hint >Filter for guest name, room number or staff involved</mat-hint> -->
    </mat-form-field>


<!-- <div fxFlex> -->
  <button mat-raised-button   class="typicalbutton"
           (click)= "newDrink()"
          >
          <mat-icon color="primary" class="matIconSpacing mat-elevation-z8" >add_circle</mat-icon> ADD PASSMARK</button>
<!-- </div> -->
  </div>
<!-- </div> -->











    <table mat-table [dataSource]="dataSource" matSort class="full-width-table">
      <!-- <form #guestForm="ngForm"> -->

      <!-- ID Column -->
      <ng-container matColumnDef="year">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>ACADEMIC YEAR </th>
        <td mat-cell *matCellDef="let row; let i = index">
          <span *ngIf="getStatusOfChange(i) && newEntry">
            <mat-form-field>
              <input matInput [(ngModel)]="row.year"
              type="text" placeholder="ACADEMIC YEAR" autocomplete="off">
            </mat-form-field>

        </span>
        <span *ngIf="!getStatusOfChange(i) || !newEntry">
          {{row.year}}</span> </td>
      </ng-container>



            <!-- Progress Column -->
            <!-- <ng-container matColumnDef="description">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> DESCRIPTION </th>
              <td mat-cell *matCellDef="let row; let i = index">
                <span *ngIf= "getStatusOfChange(i)">

                  <mat-form-field appearance="outline" >


                    <textarea matInput [(ngModel)] = "row.description"

                          rows = "4" cols = "60" placeholder="DESCRIPTION"
                          class = "level2-bar" name=description></textarea>
                  </mat-form-field>

              </span>
              <span *ngIf= "!getStatusOfChange(i)" #myIdentifier>
                {{row.description}}</span>
            </td>
            </ng-container> -->

            <ng-container matColumnDef="passmark">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> PASSMARK </th>
              <td mat-cell *matCellDef="let row; let i = index">
                <span *ngIf= "getStatusOfChange(i)">

                  <mat-form-field appearance="outline">
                    <input matInput [(ngModel)]= "row.passmark" class="level2-bar"
                    type="number" placeholder="PASSMARK" autocomplete="off">
                  </mat-form-field>

              </span>
              <span *ngIf= "!getStatusOfChange(i)">
                {{row.passmark}}</span>
            </td>
            </ng-container>

            <ng-container matColumnDef="current">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> IS CURRENT? </th>
              <td mat-cell *matCellDef="let row; let i = index">
                <!-- <span *ngIf= "getStatusOfChange(i)">

                  <mat-form-field appearance="outline">
                    <input matInput [(ngModel)]= "row.current" class="level2-bar"
                    type="number" placeholder="CURRENT?" autocomplete="off">
                  </mat-form-field>

                </span> -->

                <span *ngIf= "getStatusOfChange(i)">

                  <mat-form-field appearance="outline">
                    <mat-label>CURRENT?</mat-label>

                    <mat-select [(ngModel)]= "row.current">
                        <mat-option *ngFor="let stats of statusList" [value]= "stats">
                        {{stats}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>


              </span>


              <span *ngIf= "!getStatusOfChange(i)">
                {{row.current}}</span>
            </td>
            </ng-container>




      <!-- </form> -->

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>ACTION

        </th>
        <td mat-cell *matCellDef= "let row; let i = index">
          <button
          mat-icon-button [disabled]= "getStatusOfChange(i)"
           (click)= "reset(); setStatusOfChange(i, true)"
          >
          <mat-icon>create</mat-icon></button>

          <button
          mat-icon-button *ngIf = "getStatusOfChange(i)"
           (click)= "updateDrink(row, i, false); setStatusOfChange(i, false)"
          >
          <mat-icon>save</mat-icon></button>

          <!-- <button
          mat-icon-button
          class ="typicalbutton" (click)="undoDishChange(row)"
          >
          <mat-icon>redo</mat-icon></button> -->

          <!-- <button
          mat-icon-button color="warn"
           (click)= "updateDrink(row, i , true)"
          >
          <mat-icon>remove_circle</mat-icon></button> -->


          <button
          mat-icon-button color="warn"
           (click)= "updateDrink(row, i , true)"
          >
          <mat-icon>remove_circle</mat-icon></button>
        </td>
      </ng-container>



      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
      </tr>
    </table>

    <mat-paginator #paginator
    [length]="dataSource?.data!.length"
    [pageIndex]="0"
    [pageSize]="10"
    [pageSizeOptions]="[10,15, 25]"

    >
</mat-paginator>

  </div>
